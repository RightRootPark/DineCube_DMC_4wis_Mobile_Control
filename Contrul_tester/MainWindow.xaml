<Window x:Class="Contrul_tester.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Contrul_tester"
        mc:Ignorable="d"
        Title="DMC 4WS Robot Controller Tester" Height="700" Width="800"
        KeyDown="Window_KeyDown" KeyUp="Window_KeyUp">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Connection -->
            <RowDefinition Height="Auto"/> <!-- Mode Selection -->
            <RowDefinition Height="*"/>    <!-- Drive Controls -->
            <RowDefinition Height="Auto"/> <!-- Status Monitor -->
            <RowDefinition Height="150"/>  <!-- Log -->
        </Grid.RowDefinitions>

        <!-- Connection Panel -->
        <GroupBox Header="Connection Settings" Grid.Row="0" Margin="0,0,0,10">
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="IP Address:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <TextBox x:Name="txtIP" Text="192.168.1.207" Width="100" Margin="0,0,10,0" VerticalContentAlignment="Center"/>
                
                <TextBlock Text="Port:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <TextBox x:Name="txtPort" Text="5009" Width="50" Margin="0,0,10,0" VerticalContentAlignment="Center"/>
                
                <Button x:Name="btnConnect" Content="Connect" Width="80" Click="btnConnect_Click" Margin="0,0,5,0"/>
                <Button x:Name="btnDisconnect" Content="Disconnect" Width="80" Click="btnDisconnect_Click" IsEnabled="False"/>
                
                <Ellipse x:Name="statusLed" Width="15" Height="15" Fill="Gray" Margin="10,0,0,0" Stroke="Black"/>
                <TextBlock x:Name="lblStatus" Text="Disconnected" VerticalAlignment="Center" Margin="5,0,0,0"/>
            </StackPanel>
        </GroupBox>

        <!-- Mode Selection Panel -->
        <GroupBox Header="Drive Mode Selection" Grid.Row="1" Margin="0,0,0,10">
            <UniformGrid Rows="1" Columns="3" Height="60">
                <Button x:Name="btnMode4WS" Content="4WS Mode" Margin="5" Click="BtnMode4WS_Click" Background="LightGray" FontWeight="Bold" FontSize="14"/>
                <Button x:Name="btnModeCrab" Content="Crab Mode" Margin="5" Click="BtnModeCrab_Click" Background="LightGray" FontWeight="Bold" FontSize="14"/>
                <Button x:Name="btnModePivot" Content="Pivot Mode" Margin="5" Click="BtnModePivot_Click" Background="LightGray" FontWeight="Bold" FontSize="14"/>
            </UniformGrid>
        </GroupBox>

        <!-- Drive Control Panel -->
        <GroupBox Header="Drive Controls" Grid.Row="2" Margin="0,0,0,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/> <!-- Left / CCW -->
                    <ColumnDefinition Width="*"/> <!-- Fwd/Bwd/Stop -->
                    <ColumnDefinition Width="*"/> <!-- Right / CW -->
                </Grid.ColumnDefinitions>

                <!-- Left Column -->
                <Button x:Name="btnLeft" Content="Left (Steer)" Grid.Column="0" Height="80" Margin="10" VerticalAlignment="Center"
                        PreviewMouseLeftButtonDown="BtnLeft_Down" PreviewMouseLeftButtonUp="BtnInput_Up" FontSize="16"/>

                <!-- Center Column -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Button x:Name="btnForward" Content="Forward" Height="70" Width="150" Margin="5" Background="LightGreen"
                            PreviewMouseLeftButtonDown="BtnForward_Down" PreviewMouseLeftButtonUp="BtnInput_Up" FontSize="16"/>
                    
                    <Button x:Name="btnStop" Content="STOP (Space)" Height="70" Width="150" Margin="5" Background="Red" Foreground="White" FontWeight="Bold"
                            Click="BtnStop_Click" FontSize="16"/>

                    <Button x:Name="btnBackward" Content="Backward" Height="70" Width="150" Margin="5" Background="LightSalmon"
                            PreviewMouseLeftButtonDown="BtnBackward_Down" PreviewMouseLeftButtonUp="BtnInput_Up" FontSize="16"/>
                </StackPanel>

                <!-- Right Column -->
                <Button x:Name="btnRight" Content="Right (Steer)" Grid.Column="2" Height="80" Margin="10" VerticalAlignment="Center"
                        PreviewMouseLeftButtonDown="BtnRight_Down" PreviewMouseLeftButtonUp="BtnInput_Up" FontSize="16"/>
            </Grid>
        </GroupBox>

        <!-- Status Monitor Panel -->
        <GroupBox Header="Robot Status Monitor" Grid.Row="3" Margin="0,0,0,10">
            <UniformGrid Rows="1" Columns="7">
                <!-- Headers and Values -->
                <StackPanel Margin="5">
                    <TextBlock Text="Accel" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="lblStatAccel" Text="0.00" HorizontalAlignment="Center" FontSize="16" Foreground="Blue"/>
                </StackPanel>
                <StackPanel Margin="5">
                    <TextBlock Text="RF Angle" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="lblStatRF" Text="0.00" HorizontalAlignment="Center" FontSize="16"/>
                </StackPanel>
                <StackPanel Margin="5">
                    <TextBlock Text="RR Angle" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="lblStatRR" Text="0.00" HorizontalAlignment="Center" FontSize="16"/>
                </StackPanel>
                <StackPanel Margin="5">
                    <TextBlock Text="LF Angle" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="lblStatLF" Text="0.00" HorizontalAlignment="Center" FontSize="16"/>
                </StackPanel>
                <StackPanel Margin="5">
                    <TextBlock Text="LR Angle" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="lblStatLR" Text="0.00" HorizontalAlignment="Center" FontSize="16"/>
                </StackPanel>
                <StackPanel Margin="5">
                    <TextBlock Text="Error" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="lblStatErr" Text="0" HorizontalAlignment="Center" FontSize="16" Foreground="Red"/>
                </StackPanel>
                <StackPanel Margin="5">
                    <TextBlock Text="Cycle (ms)" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="lblStatCycle" Text="0" HorizontalAlignment="Center" FontSize="16" Foreground="Purple"/>
                </StackPanel>
            </UniformGrid>
        </GroupBox>

        <!-- Log Panel -->
        <GroupBox Header="Communication Log" Grid.Row="4">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <StackPanel Orientation="Horizontal" Margin="5">
                    <TextBlock Text="Last Sent Packet: " FontWeight="Bold"/>
                    <TextBlock x:Name="lblLastPacket" Text="None" Foreground="Blue"/>
                </StackPanel>
                <TextBox x:Name="txtLog" Grid.Row="1" IsReadOnly="True" VerticalScrollBarVisibility="Auto" TextWrapping="Wrap" Margin="5"/>
            </Grid>
        </GroupBox>
    </Grid>
</Window>
